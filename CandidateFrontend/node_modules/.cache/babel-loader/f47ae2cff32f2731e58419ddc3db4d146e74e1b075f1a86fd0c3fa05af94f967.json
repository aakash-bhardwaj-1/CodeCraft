{"ast":null,"code":"var _jsxFileName = \"/home/aakash/MySPE/CodeCraft/CandidateFrontend/src/pages/ViewJobs.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport Navbar from \"../components/header/Navbar\";\nimport PageHeading from \"../components/header/PageHeading\";\nimport Table from \"../components/tables/Table\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ViewJobs() {\n  _s();\n  const columns = [\"Company Name\", \"Job Role\", \"Job Description\", \"Requirements\", \"Apply\"];\n  function JobApplyDTO(id, company, candidateId) {\n    return {\n      cid: parseInt(candidateId),\n      jid: id,\n      company_name: company\n    };\n  }\n  const handleViewClick = async (id, company, candidateId) => {\n    try {\n      const dto = JobApplyDTO(id, company, candidateId);\n      await axios.post(\"http://localhost:8000/candidate/apply\", dto);\n      console.log('Job application submitted:', dto);\n      // After applying, fetch the updated list of applied jobs and update the table\n      fetchAppliedJobs();\n      alert(\"Interview schedule will be notified via e-mail\");\n    } catch (error) {\n      console.error('Error applying for job:', error);\n    }\n  };\n  const [tableData, setTableData] = useState([]);\n  const fetchAppliedJobs = async () => {\n    try {\n      const appliedJobsResponse = await axios.get(`http://localhost:8000/candidate/appliedJobs/${localStorage.getItem(\"candidateId\")}`);\n      const appliedJobs = appliedJobsResponse.data;\n\n      // Mark applied jobs in the table data\n      const updatedTableData = tableData.map(job => {\n        const isApplied = appliedJobs.some(appliedJob => appliedJob.jid === job.id);\n        return {\n          ...job,\n          applied: isApplied // Adding a flag to indicate if the job is applied\n        };\n      });\n      setTableData(updatedTableData);\n    } catch (error) {\n      console.error('Error fetching applied jobs:', error);\n    }\n  };\n  const renderViewButton = (id, company, isApplied) => {\n    if (isApplied) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"view-button\",\n        disabled: true,\n        children: \"Applied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleViewClick(id, company, localStorage.getItem(\"candidateId\")),\n        className: \"view-button\",\n        children: \"Apply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this);\n    }\n  };\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch all active jobs\n        const allJobsResponse = await axios.get(\"http://localhost:8000/interviewer/all-active-jobs\");\n        const allJobs = allJobsResponse.data;\n\n        // Fetch applied jobs\n        const appliedJobsResponse = await axios.get(`http://localhost:8000/candidate/appliedJobs/${localStorage.getItem(\"candidateId\")}`);\n        const appliedJobs = appliedJobsResponse.data;\n\n        // Mark applied jobs in the table data\n        const updatedTableData = allJobs.map(job => {\n          const isApplied = appliedJobs.some(appliedJob => appliedJob.jid === job.id);\n          return {\n            ...job,\n            applied: isApplied // Adding a flag to indicate if the job is applied\n          };\n        });\n        setTableData(updatedTableData);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PageHeading, {\n      title: \"Available Jobs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      data: tableData.map(row => ({\n        \"Company Name\": row.company,\n        \"Job Role\": row.roleType,\n        \"Job Description\": row.jobDescription,\n        \"Requirements\": row.allRequirements.map(req => req.requirementName).join(', '),\n        \"Apply\": renderViewButton(row.id, row.company, row.applied) // Pass the applied flag\n      }))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n}\n_s(ViewJobs, \"qcVQMfdRY2vxgSp5dutEfuJRk7k=\");\n_c = ViewJobs;\nexport default ViewJobs;\nvar _c;\n$RefreshReg$(_c, \"ViewJobs\");","map":{"version":3,"names":["React","useEffect","useState","Navbar","PageHeading","Table","axios","jsxDEV","_jsxDEV","ViewJobs","_s","columns","JobApplyDTO","id","company","candidateId","cid","parseInt","jid","company_name","handleViewClick","dto","post","console","log","fetchAppliedJobs","alert","error","tableData","setTableData","appliedJobsResponse","get","localStorage","getItem","appliedJobs","data","updatedTableData","map","job","isApplied","some","appliedJob","applied","renderViewButton","className","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fetchData","allJobsResponse","allJobs","title","row","roleType","jobDescription","allRequirements","req","requirementName","join","_c","$RefreshReg$"],"sources":["/home/aakash/MySPE/CodeCraft/CandidateFrontend/src/pages/ViewJobs.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Navbar from \"../components/header/Navbar\";\nimport PageHeading from \"../components/header/PageHeading\";\nimport Table from \"../components/tables/Table\";\nimport axios from \"axios\";\n\nfunction ViewJobs() {\n    const columns = [\"Company Name\", \"Job Role\", \"Job Description\", \"Requirements\", \"Apply\"];\n    \n    function JobApplyDTO(id, company, candidateId) {\n        return {\n            cid: parseInt(candidateId),\n            jid: id,\n            company_name: company\n        };\n    }\n\n    const handleViewClick = async (id, company, candidateId) => {\n        try {\n            const dto = JobApplyDTO(id, company, candidateId);\n            await axios.post(\"http://localhost:8000/candidate/apply\", dto);\n            console.log('Job application submitted:', dto);\n            // After applying, fetch the updated list of applied jobs and update the table\n            fetchAppliedJobs();\n\t\t\talert(\"Interview schedule will be notified via e-mail\");\n        } catch (error) {\n            console.error('Error applying for job:', error);\n        }\n    };\n\n    const [tableData, setTableData] = useState([]);\n\n    const fetchAppliedJobs = async () => {\n        try {\n            const appliedJobsResponse = await axios.get(`http://localhost:8000/candidate/appliedJobs/${localStorage.getItem(\"candidateId\")}`);\n            const appliedJobs = appliedJobsResponse.data;\n\n            // Mark applied jobs in the table data\n            const updatedTableData = tableData.map(job => {\n                const isApplied = appliedJobs.some(appliedJob => appliedJob.jid === job.id);\n                return {\n                    ...job,\n                    applied: isApplied // Adding a flag to indicate if the job is applied\n                };\n            });\n\n            setTableData(updatedTableData);\n        } catch (error) {\n            console.error('Error fetching applied jobs:', error);\n        }\n    };\n\n    const renderViewButton = (id, company, isApplied) => {\n        if (isApplied) {\n            return <button className=\"view-button\" disabled>Applied</button>;\n        } else {\n            return (\n                <button onClick={() => handleViewClick(id, company, localStorage.getItem(\"candidateId\"))} className=\"view-button\">\n                    Apply\n                </button>\n            );\n        }\n    };\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                // Fetch all active jobs\n                const allJobsResponse = await axios.get(\"http://localhost:8000/interviewer/all-active-jobs\");\n                const allJobs = allJobsResponse.data;\n\n                // Fetch applied jobs\n                const appliedJobsResponse = await axios.get(`http://localhost:8000/candidate/appliedJobs/${localStorage.getItem(\"candidateId\")}`);\n                const appliedJobs = appliedJobsResponse.data;\n\n                // Mark applied jobs in the table data\n                const updatedTableData = allJobs.map(job => {\n                    const isApplied = appliedJobs.some(appliedJob => appliedJob.jid === job.id);\n                    return {\n                        ...job,\n                        applied: isApplied // Adding a flag to indicate if the job is applied\n                    };\n                });\n\n                setTableData(updatedTableData);\n            } catch (error) {\n                console.error('Error fetching data:', error);\n            }\n        };\n\n        fetchData();\n    }, []);\n\n    return (\n        <div>\n            <Navbar />\n            <PageHeading title=\"Available Jobs\" />\n            <Table \n                columns={columns}\n                data={tableData.map(row => ({\n                    \"Company Name\": row.company,\n                    \"Job Role\": row.roleType,\n                    \"Job Description\": row.jobDescription,\n                    \"Requirements\": row.allRequirements.map(req => req.requirementName).join(', '),\n                    \"Apply\": renderViewButton(row.id, row.company, row.applied), // Pass the applied flag\n                }))}\n            /> \n        </div>\n    );\n}\n\nexport default ViewJobs;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}